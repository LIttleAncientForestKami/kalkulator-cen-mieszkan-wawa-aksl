<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<title>Dzielnice Warszawy - mieszkania z OtoDom - @LAFK_pl</title>

<script src="jquery-1.11.1.min.js"></script>
<script>

	var dzielnice = {
		"Bemowo"	: false, 
		"Białołęka" 	: false,
		"Bielany"	: false,
		"Mokotów"	: false,
		"Ochota"	: false,
		"Praga-Południe": false,
		"Praga-Północ" 	: false,
		"Rembertów" 	: false,
		"Śródmieście" 	: false,
		"Targówek" 	: false,
		"Ursus"		: false,
		"Ursynów" 	: false,
		"Wawer"		: false,
		"Wesoła"	: false,
		"Wilanów" 	: false,
		"Włochy" 	: false,
		"Wola" 		: false,
		"Żoliborz" 	: false
	};		

	var wybrane = "Wybrano dzielnice: ";

	$( document ).ready(function() {
		$( "#wybrane" ).html("Wybrane dzielnice to?");
	});
	
	function wybor(dzielnica) {
		if (dzielnice[dzielnica] === true) {
			return false;
		} else {
			dzielnice[dzielnica] = true;
		}
		wybrane = wybrane + dzielnica + " ";
		$( "#wybrane" ).html(wybrane);
	};
	

	function bierzCeny() {
		var xhr = new XMLHttpRequest();
		xhr.open('GET',"http://otodom.pl/rpc/evaluator.php?city=Warszawa&object=Flat&offer=sell&months=6&quarter=Bemowo&area=20");

		xhr.onload = function() {
		 var responseText = xhr.responseText;
		 console.log(responseText);
		 // process the response.
		};

		xhr.onerror = function() {
		  console.log('There was an error!');
		};

		xhr.send(null);
/*
		$.get( 
		  "http://otodom.pl/rpc/evaluator.php?city=Warszawa&object=Flat&offer=sell&months=6&quarter=Bemowo&area=20",
		  // {paramOne : 1, paramX : 'abc'},
		  function(data) {
		     alert('Cena to: ' + data.price[secondary[avg]]);
		  }
	)};
*/

	};

</script>

</head>

<body>

<aside>
Wybierz interesujące Cię dzielnice i poproś o ceny. 
Do dodania: obsługa CORS (by to działało) oraz przycisk "chcę wszystkie ceny", wraz z obsługą (to jest proste).

Oraz wyświetlanie rezultatów. ;-)
</aside>


<section id="Mapa">
<img src="WawaDzielnice.png" width="500" height="530" border="0" usemap="#map" />

<map name="map">
<!-- #$-:Image map file created by GIMP Image Map plug-in -->
<!-- #$-:GIMP Image Map plug-in by Maurits Rijk -->
<!-- #$-:Please do not edit lines starting with "#$" -->
<!-- #$VERSION:2.3 -->
<!-- #$AUTHOR:tjb -->
<area shape="poly" coords="81,34,99,58,94,85,134,133,174,154,255,120,277,123,283,92,276,30,262,10,138,7,78,25,81,29,79,25" onclick="wybor(&quot;Białołęka&quot;);return false;" href="#" title="Białołęka" />
<area shape="poly" coords="85,90,28,108,33,172,123,208,165,161,135,146,131,143" onclick="wybor(&quot;Bielany&quot;);return false;" href="#" title="Bielany" />
<area shape="poly" coords="169,165,188,211,117,216" onclick="wybor(&quot;Żoliborz&quot;);return false;" href="#" title="Żoliborz" />
<area shape="poly" coords="37,179,21,231,28,307,79,300,89,291,85,279,89,244,117,210,40,180" onclick="wybor(&quot;Bemowo&quot;);return false;" href="#" title="Bemowo" />
<area shape="poly" coords="25,311,82,343,75,351,22,360,21,344,8,350,3,315" onclick="wybor(&quot;Ursus&quot;);return false;" href="#" title="Ursus" />
<area shape="poly" coords="41,308,81,303,99,310,112,326,159,344,163,444,87,394,75,361,82,341" onclick="wybor(&quot;Włochy&quot;);return false;" href="#" title="Włochy" />
<area shape="poly" coords="156,339,112,324,104,307,177,277,184,307,162,306" onclick="wybor(&quot;Ochota&quot;);return false;" href="#" title="Ochota" />
<area shape="poly" coords="179,272,153,214,116,221,93,245,87,278,91,293,82,301,98,306" onclick="wybor(&quot;Wola&quot;);return false;" href="#" title="Wola" />
<area shape="poly" coords="158,218,182,272,189,305,205,301,214,313,248,295,233,283,191,218" onclick="wybor(&quot;Śródmieście&quot;);return false;" href="#" title="Śródmieście" />
<area shape="poly" coords="303,185,361,174,380,152,381,183,401,221,392,235,347,251,342,242,335,253,309,214" onclick="wybor(&quot;Rembertów&quot;);return false;" href="#" title="Rembertów" />
<area shape="poly" coords="277,125,306,211,259,216,208,190,197,145,257,123" onclick="wybor(&quot;Targówek&quot;);return false;" href="#" title="Targówek" />
<area shape="poly" coords="305,215,331,254,287,297,247,286,222,253,247,219" onclick="wybor(&quot;Praga Południe&quot;);return false;" href="#" title="Praga Południe" />
<area shape="poly" coords="174,158,192,149,205,193,251,217,220,250,194,217" onclick="wybor(&quot;Praga Północ&quot;);return false;" href="#" title="Praga Północ" />
<area shape="poly" coords="389,245,402,222,472,209,485,311,463,334,435,333,428,268" onclick="wybor(&quot;Wesoła&quot;);return false;" href="#" title="Wesoła" />
<area shape="poly" coords="387,245,342,257,338,248,291,295,305,321,307,351,381,432,487,429,490,355,465,335,435,337,426,270" onclick="wybor(&quot;Wawer&quot;);return false;" href="#" title="Wawer" />
<area shape="poly" coords="303,344,235,389,303,508,364,433" onclick="wybor(&quot;Wilanów&quot;);return false;" href="#" title="Wilanów" />
<area shape="poly" coords="238,383,163,386,164,449,152,464,157,516,271,525,298,512,235,389" onclick="wybor(&quot;Ursynów&quot;);return false;" href="#" title="Ursynów" />
<area shape="poly" coords="163,384,164,311,202,305,215,321,250,299,274,296,291,312,298,345,239,381" onclick="wybor(&quot;Mokotów&quot;);return false;" href="#" title="Mokotów" />
</map>
</section>

<footer>
<p id="wybrane">Jeśli to widzisz, JS nie działa.</p>
<button onclick="bierzCeny();return false;">Ceny poproszę</button>
</footer>

</body>
</html>
